# 图解HTTP
## http/1.1可使用的方法
1. GET：请求报文
2. POST： 传输实体主体
3. PUT：传输文件
4. HEAD: 获得报文首部
5. DELETE: 删除文件
6. OPTIONS: 询问支持的方法
7. TRACE: 追踪路径。引发跨站追踪
8. CONNECT: 要求用隧道协议连接代理。SSL，TLS

## 知识点
- 持久连接 keep-alive 减少TCP建立和连接的开销。只要没有明确提出断开就保持TCP连接
- 管线化，不用等待响应亦可直接发送下一个请求
- cookie 服务器端生成，为了克服无状态的缺点。创建cookie时如果不指定生存有效时间，则cookie只在浏览器关闭前有效，cookie会在服务器端和客户端传输，但是不会保存在客户机的磁盘上，打开新的浏览器将不能获得原先创建的cookie信息。
- 范围请求 请求内容的一部分，Content-Range:500-1000 ，返回206 Partial Content,如果不能分段请求则返回所有，状态码200
- 内容协商机制是指客户端和服务端就响应的资源内容进行交涉，选择合适的资源。有语言，字符集，编码方式等选择。包括 Accept，Accept-Charset，Accept-Encoding，Accept-Language，Content-Language



## 状态码
- 2xx 成功
- 204 操作成功，返回头部，不返回响应主体
- 206 范围请求成功
- 3XX 重定向，表明浏览器需要执行某些特殊的处理以正确处理请求
- 301 永久性重定向
- 302 临时性重定向 ， 303 要改成GET方法请求的临时性重定向
- 304 表示客户端发送附带条件的请求时，服务器允许访问资源，但是未满足条件
- 4XX 客户端错误
- 400 请求报文里有语法错误
- 401 请求需要有通过HTTP认证的认证信息
- 403 表明请求资源的访问被服务器拒绝
- 404 没有找到资源
- 5XX服务器错误



## 缓存 (要知道在不同的角度去看，服务器的头部和客户端的首部解释不一样)
缓存不仅可以存在于缓存服务器（代理）内，还可以存在客户端浏览器中（都在磁盘上）
- 通用首部字段（服务器，客户端）
- 请求首部字段（客户端） 
    - Accept
    - Host
    - Authorization
    - If-Match.服务器会比对 If-Match 的字段值和资源的 ETag 值，仅当两者一致 时，才会执行请求。反之，则返回状态码 412 Precondition Failed 的响 应。

    

- 响应请求首部字段（服务器）



### Cache-Control
- 使用 no-cache 指令的目的是为了防止从缓存中返回过期的资源。 客户端发送的请求中如果包含 no-cache 指令，则表示客户端将不会接 收缓存过的响应。于是，“中间”的缓存服务器必须把客户端请求转发 给源服务器。如果服务器返回的响应中包含 no-cache 指令，那么缓存服务器不能对 资源进行缓存。源服务器以后也将不再对缓存服务器请求中提出的资 源有效性进行确认，且禁止其对响应资源进行缓存操作

- s-maxage>max-age>Expires

### Connection

Connection 首部字段具备如下两个作用。
- 控制不再转发给代理的首部字段
- 管理持久连接.HTTP/1.1 版本的默认连接都是持久连接。为此，客户端会在持 久连接上连续发送请求。当服务器端想明确断开连接时，则指定 Connection 首部字段的值为 Close.HTTP/1.1 之前的 HTTP 版本的默认连接都是非持久连接。为 此，如果想在旧版本的 HTTP 协议上维持持续连接，则需要指定 Connection 首部字段的值为 Keep-Alive。

### Date

首部字段 Date 表明创建 HTTP 报文的日期和时间。

###  Trailer
首部字段 Trailer 会事先说明在报文主体后记录了哪些首部字段。该 首部字段可应用在 HTTP/1.1 版本分块传输编码时


### 机构认证
### 客户端认证
### 安全问题
- 主动攻击
- 被动攻击
