# è¿­ä»£å™¨æ¨¡å¼
## å«ä¹‰
æŒ‡æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚é™¤äº†æ•°ç»„å¯ä»¥è¢«è¿­ä»£ç±»æ•°ç»„å¯¹è±¡ä¹Ÿæœ‰lengthå’Œæ‰€ä»¥å¯ä»¥åˆ¤æ–­æ˜¯å¦æ˜¯arrayå†è¿­ä»£å‚
## å¥½å¤„
è¿­ä»£å™¨æ¨¡å¼å¯ä»¥æŠŠè¿­ä»£è¿‡ç¨‹ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œåœ¨ä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼ä¹‹åï¼Œå³ä½¿ä¸å…³ç³»å¯¹è±¡çš„å†…éƒ¨æ„é€ ï¼Œä¹Ÿå¯ä»¥æŒ‰é¡ºåºè®¿é—®å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ 
## javascriptä¸­çš„è¿­ä»£å™¨
Array.prototype.forEach
## è‡ªå·±çš„è¿­ä»£å™¨
```js
var each = function(arr, callback){
  var len = arr.length;
  for(let i = 0; i < len; i++){
    callback.call(arr[i], i, arr[i]); // å°†ä¸‹æ ‡å’Œå…ƒç´ å½“ä½œå‚æ•°ä¼ ç»™callbackå‡½æ•°
  }
}
each([1,2,3,4],function(i,n){
  alert([i,n]);
})
```
## è¿­ä»£å™¨åˆ†ç±»
- å†…éƒ¨è¿­ä»£å™¨ï¼Œå¤–éƒ¨åªéœ€è¦è°ƒç”¨ä¸€æ¬¡å°±è¿›è¡Œè¿­ä»£ï¼Œæ¯”å¦‚ä¹‹å‰çš„forEachå’Œeach
- å¤–éƒ¨è¿­ä»£å™¨ï¼Œå¿…é¡»æ˜¾å¼çš„è¯·æ±‚è¿­ä»£ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œ
```js
  var Iterator = function(obj){
    var current = 0;
    var next = function(){
      curretn += 1;
    }
    var isDone = function(){
      return current >= obj.length;
    }
    var getCurrItem = function(){
      return obj[current];
    }
    return {
      next: next,
      isDone: isDone,
      getCurrItem: getCurrItem
    }
  }
  // æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ä¸€æ ·
  var compare = function(iterator1, iterator2){
    while(!iterator1.isDone()&&!iterator2.isDone()){
      if(iterator1.getCurrItem()!==iterator2.getCurrItem()){
        throw new Error('iterator1 å’Œ iterator2ä¸ç›¸ç­‰');
      }
      iterator1.next();
      iterator2.next();
    }
    alert('iterator1 å’Œ iterator2 ç›¸ç­‰')
  }
  var iterator1 = Iterator([1,2,3]);
  var iterator2 = Iterator([1,2,3]);
  compare(iterator1, iterator2);
```
## jqueryä¸­è¿­ä»£å¯¹è±¡çš„å®Œæ•´å†™æ³•
```js
  $.each = function(obj, callback){
    var value,
    i = 0,
    length = obj.length,
    isArray = isArraylike(obj);
    if(isArray){
      for(;i < length; i++){
        value = callback.call(obj[i],i,obj[i]);
        if(value === false){
          break;
        }
      }
    }
    else {
      for( i in obj){
        value = callback.call(obj[i],i,obj[i]);
        if(value === false){
          break;
        }
      }
    }
    return obj;
  }
```

## è¿­ä»£å™¨æ¨¡å¼çš„åº”ç”¨ä¸¾ä¾‹
æ ¹æ®æµè§ˆå™¨æƒ…å†µæ¥ä¸Šä¼ çš„ç»„ä»¶
```js
// bad demo
var getUploadObj = function(){
  try {
    return new ActiveXObject('TXFTNActiveX.FTNUpload');
  }catch(e){
    if(supportFlash()){
      var str = '<object type="application/x-shockwave-flach"></object>';
      return $(str).appendTo($('body'));
    }else{
      var str = '<input name ="file" type="file" />';
      return $(str).appendTo($('body')); 
    }
  }
}
// ä¸å¥½çš„ç‚¹ğŸ‘
// 1. éš¾ä»¥é˜…è¯»
// 2. è¿åå¼€é—­åŸåˆ™ï¼ˆå¼€é—­åŸåˆ™è§„å®šâ€œè½¯ä»¶ä¸­çš„å¯¹è±¡ï¼ˆç±»ï¼Œæ¨¡å—ï¼Œå‡½æ•°ç­‰ç­‰ï¼‰åº”è¯¥å¯¹äºæ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œä½†æ˜¯å¯¹äºä¿®æ”¹æ˜¯å°é—­çš„)â€
// good demo ğŸ‘Œ
var getActiveUploadObj = function(){
  try{
    return new ActiveXObject('TXFTNActiveX.FTNUpload');
  }catch(e){
    return false;
  }
}
var getFlashUploadObj = function(){
  if(supportFlash()){
    var str = '<object type="application/x-shockwave-flach"></object>';
    return $(str).appendTo($('body'));
  }
  return false;
}
var getFormUpload = function(){
  var str = '<input name ="file" type="file" />';
  return $(str).appendTo($('body')); 
}
var iteratorUploadObj = function(){
  for(var i = 0, fn; fn = arguments[i++];){
    var uploadObj = fn();
    if(uploadObj !== false){
      return uploadObj;
    }
  }
}
var uploadObj = iteratroUploadObj( getActiveUploadObj,getFlashUploadObj,getFormUpload)
```