# 重构第二版
用js语言编写示例，前五章主要是用一个例子开头，再写个是什么，为什么，什么时候要用，怎么用，以及重构方法字典。
## 重构的原则
- 一边开发一边重构
### 为何重构
 - 改进软件设计
 - 更容易理解
 - 帮助寻找bug
 - 提高编程速度
### 何时重构
  - 预备性重构：让添加新功能更容易
  - 帮助理解的重构：使代码更容易懂
  - 捡垃圾式重构：先记下来，有时间再重构
  - 有计划的重构和见机行事的重构
  - 长期重构
  - 复审代码时重构
### 重构的挑战
- 延缓新功能开发
- 代码所有权，其它模块引用可能出错
- 分支融合产生矛盾
- 测试耗费时间并且需要完整

## 重构的步骤
- 先写好第一个版本
- 用框架构建自测试
- 每次修改一行（步）都要进行测试保证所有的测试用例都通过【为了减少调试找bug的时间】
- 不要提前考虑性能问题，重构完之后再考虑
- 直到所有的重构完毕

## 使用场景

- 过长函数
- 重复代码
- 神秘命名
- 过长参数列表
- 全局数据
- 可变数据
- 发散式变化，修改一个东西需要跳转多处，某个模块经常因为不同的原因在不同的方向发生变化
- 霰弹式变化，需要在不同的类中做出许多小修改时
- 依恋情节，一个模块根另一个模块的数据交流额外频繁，远胜于与模块内部交互
- 数据泥团，很多貌似不相关的数据字段经常一起出现
- 基本类型偏执 (if a < upper  && a > lower)
- 重复的switch
- 循环语句
- 冗赘的元素
- 夸夸其谈通用性
- 临时字段
- 过长消息链
- 中间人（过度委托）
- 内幕交易
- 过大的类
- 异曲同工的类
- 纯数据类
- 被拒绝的馈赠（子类复用超类行为但是不实现超类的接口）
- 注释